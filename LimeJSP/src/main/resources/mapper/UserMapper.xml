<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.user.mapper.UserMapper">
	
	<!-- 회원 가입 -->
    <insert id="insertUser" parameterType="User">
        INSERT INTO user_tb
             ( user_uid					/* 유저번호 */
             , username					/* 유저이름 */
             , email					/* 이메일 */
             , password					/* 비밀번호 */
             , phone					/* 핸드폰 번호 */
             , address					/* 집주소 */
             , address_detail			/* 상세주소 */
             , address_extra			/* 주소 참고사항 */
             , zipcode					/* 우편번호 */
             )
        VALUES
             ( user_seq.NEXTVAL
             , #{username}
             , #{email}
             , #{password}
             , #{phone}
             , #{address}
             , #{addressDetail}
             , #{addressExtra, jdbcType=VARCHAR}
             , #{zipcode}
        	 )
    </insert>

	<!-- 이메일 중복 여부 -->
    <select id="existEmail" parameterType="string" resultType="int">
	    SELECT COUNT(*)
	      FROM user_tb
	     WHERE email = #{email}
	</select>

	<!-- 아이디 중복 여부 -->
	<select id="existUserName" parameterType="string" resultType="int">
	    SELECT COUNT(*)
	      FROM user_tb
	     WHERE username = #{username}
	</select>
	
	<!-- email로 유저 정보 조회 -->
	<select id="findByEmail" parameterType="string" resultType="com.example.demo.user.domain.User">
	    SELECT user_uid        AS userUid        	/* 유저번호 */
	         , username                            	/* 유저이름 */
	         , email  								/* 이메일 */
	         , password             				/* 비밀번호 */
	         , phone          						/* 핸드폰 번호 */
	         , address     							/* 집주소 */
	         , address_detail  AS addressDetail		/* 상세주소 */
	         , address_extra   AS addressExtra 		/* 주소 참고사항 */
	         , zipcode     							/* 우편번호 */
	         , signup_date     AS signupDate		/* 작성일 */
	      FROM user_tb
	     WHERE email = #{email}
</select>


<!-- 유저 정보 조회
    <select id="findAll" resultType="com.example.demo.user.domain.User">
    	SELECT user_uid AS userUid				/* 유저번호 */
    	     , username							/* 유저이름 */
    	     , email							/* 이메일 */
    	     , password							/* 비밀번호 */
    	     , phone							/* 핸드폰 번호 */
    	     , address							/* 집주소 */
    	     , address_detail AS addressDetail	/* 상세주소 */
    	     , address_extra  AS addressExtra	/* 주소 참고사항 */
    	     , zipcode							/* 우편번호 */
	     , signup_date    AS signupDate			/* 작성일 */
          FROM user_tb
	</select>
	-->

</mapper>
